<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<input class="gridSize" placeholder="Enter grid size (1-100)">

<button class="addGrid">Add grid</button>
  <div class="container"></div>


  <script>
//Grabbing the div for the grid container
let container = document.querySelector(".container");
 container.style.display = 'flex';
 container.style.flexWrap = 'wrap';
 container.style.width = '1500px';
 container.style.height = '1500px';

//Determine default grid size
let gridSize = 15;

//reate the grid based on gridSize parameter
function makeGrid(gridSize){
 for(let i = 0;i < gridSize; i++){
for(let j = 0; j<gridSize; j++){

 let div = document.createElement('div');
 div.classList.add('div');
 div.style.flex= `1 1 calc(${100 / gridSize}% - 2px)`;
 div.style.opacity = '0'

 //Add hover effect to create pixel trail
 div.addEventListener('mouseover',()=> {
    let opacityValue = parseFloat(div.style.opacity) + 0.5; //turn string into number
    if (opacityValue> 1.0){
     opacityValue = 1.0; 
    } 
    div.style.opacity = opacityValue; //u dont have to convert it back to string because JavaScript does it on its own
 div.style.backgroundColor = 'red';

})
 container.appendChild(div);
}};
}

let addGrid = document.querySelector('.addGrid');
addGrid.addEventListener('click',()=>{
  let gridSizeInput = document.querySelector('.gridSize')
gridSize = parseInt(gridSizeInput.value); //because the value you obtain from HTMl is always a string, even if the user enters a number. Js doesnt automatic string to number

//validate grid size 
if (gridSize <1 || gridSize >100|| isNaN(gridSize)|| !gridSizeInput.value ){
  alert('Please enter a number from 1 to 100');
  return; //ensure the code stop executing if any of the condition is true
}


//clear the existing grid
container.innerHTML = '';

// Pass updated gridSize to makeGrid
makeGrid(gridSize);
});

// Initialize the grid with default grid size
makeGrid(gridSize);
  </script>
</body>
</html>